function langcode_replacer(a,b=[]){let c=0;return a.replace(/%s/g,()=>b[c++])}$(function(){var a="#post",b=$(location).attr("href").match(/(.*?)\/show_post\/\w{24}\/.*?\?child_id=(\w{24})/);null!==b&&(a="#nestedbit-"),null==b&&(b=$(location).attr("href").match(/(.*?)\/show_post\/(\w{24})/)),null==b&&(b=$(location).attr("href").match(/(.*?)\/post\/(\w{24})/));var c=$(".jsHeader"),d=c.length?c.height()-10:0;if(null!==b){var e=b[2];try{$("html, body").animate({scrollTop:$(a+e).offset().top-d})}catch(a){}}});function spoiler(){return!1}function quote(b,c,d){d||(d="yes");var e="";if(null!=$.cookie("kaskus_multiquote_"+__thread_id)){for(e=$.cookie("kaskus_multiquote_"+__thread_id).split(","),store_post_id=$.cookie("kaskus_multiquote_"+__thread_id),is_exist=!1,i=0;i<e.length;i++)e[i]==c&&(is_exist=!0,"yes"==d&&(store_post_id=store_post_id.split(","+c).join(""),store_post_id=store_post_id.split(c+",").join(""),store_post_id=store_post_id.split(c).join("")));!1==is_exist&&(store_post_id+=","+c)}else store_post_id=c;if(""==store_post_id)return $.cookie("kaskus_multiquote_"+__thread_id,null,{expires:null,path:"/",secure:!1}),$("#mq_"+c).toggleClass("btn-orange"),!0;$("#mq_"+c).toggleClass("btn-orange");var f=new Date;f.setTime(f.getTime()+86400000),$.cookie("kaskus_multiquote_"+__thread_id,store_post_id,{expires:f,path:"/",secure:!1})}$(document).ready(function(){$(".jsScrollTopForum").on("scroll",function(){var a=$(this).scrollLeft();if(0==a)$(".jsContainerTopForum").removeClass("headerShadow");else{var b=$(this)[0].scrollWidth-$(this).parent().width();a==b?$(".jsContainerTopForum").removeClass("headerShadow"):$(".jsContainerTopForum").addClass("headerShadow")}}),$(".jsScrollTopForum").trigger("scroll"),$(".js-show-first-page").on("click",function(){window.location.replace("/thread/"+$(this).data("threadid"))}),$("#form_poll").submit(function(){$("#securitytokenpoll").val($("#securitytoken").val())}),$jQ("body").on("submit","#lapor-hansip-form",function(a){a.preventDefault(),laporHansip(this)}),$jQ("#postlist-wrapper").on("click",".subscribe-post",function(){var a=$jQ(this),b=a.attr("data-postid"),c=$jQ("#securitytoken").val(),d=__thread_id;return $jQ.ajax({url:WAP_KASKUS_URL+"/myforum/subscribe_post",type:"POST",data:{post_id:b,thread_id:d,securitytoken:c},xhrFields:{withCredentials:!0},success:function(b){if("object"!=typeof b&&(b=$jQ.parseJSON(b)),$jQ(".sctoken").val(b.securitytoken),!0==b.result){a.removeClass("subscribe-post"),a.addClass("unsubscribe-post"),a.text(b.unsubscribe_wording),showNotice(b.message_return);var c=__forum_id+"thread detail",e="subscribe post",f=d;_gaq.push(["_trackEvent",c,e,f]),dataLayer.push({event:"trackEvent","eventDetails.category":c,"eventDetails.action":e,"eventDetails.label":f})}else showNotice(b.message_return)},error:function(){}}),!1}),$jQ("#postlist-wrapper").on("click",".unsubscribe-post",function(){var a=$jQ(this),b=a.attr("data-postid"),c=$jQ("#securitytoken").val(),d=__thread_id;return $jQ.ajax({url:WAP_KASKUS_URL+"/myforum/unsubscribe_post",type:"POST",data:{post_id:b,thread_id:d,securitytoken:c},xhrFields:{withCredentials:!0},success:function(b){if("object"!=typeof b&&(b=$jQ.parseJSON(b)),$jQ(".sctoken").val(b.securitytoken),!0==b.result){a.removeClass("unsubscribe-post"),a.addClass("subscribe-post"),a.text(b.subscribe_wording),showNotice(b.message_return);var c=__forum_id+"thread detail",e="subscribe post",f=d;_gaq.push(["_trackEvent",c,e,f]),dataLayer.push({event:"trackEvent","eventDetails.category":c,"eventDetails.action":e,"eventDetails.label":f})}else showNotice(b.message_return)},error:function(){}}),!1}),$(document).on("click",".quick-reply-post",function(){var a=$(this).attr("data-postid");$("#parent_post").val(a),$("#message").focus()}),$("body").on("click","a.animate_nested",function(a){if(a.preventDefault(),parent_post=$(this).attr("data-postid"),target_dom_id="post"+parent_post,target_dom=$("#"+target_dom_id),"undefined"==typeof target_dom[0])$(location).attr("href",$(this).attr("href"));else{var b=$("#site-header-main").length?$("#site-header-main").height():0;$("html, body").animate({scrollTop:target_dom.offset().top-b})}}),$(document).on("click",".whoCendolAjax",function(){var a=$(this).attr("data-postid");return $.ajax({url:"/misc/get_who_cendoled/"+a,xhrFields:{withCredentials:!0},success:function(a){"object"!=typeof a&&(resp=$.parseJSON(a)),!0==resp.result?(openModal("who-cendoled-modal"),$("#cendolList").html(resp.whocendoled),$("#bataList").html(resp.whobata),""==resp.whocendoled?($(".jsTabNav").find(".cendol").removeClass("active"),$(".jsTabNav").find(".bata").addClass("active"),$(".modal-header").removeClass("cendol").addClass("bata"),$("#bataList").removeClass("D(n)").removeAttr("style")):($(".jsTabNav").find(".bata").removeClass("active"),$(".jsTabNav").find(".cendol").addClass("active"),$(".modal-header").removeClass("bata").addClass("cendol"),$("#cendolList").addClass("D(b)").removeAttr("style"),$("#bataList").addClass("D(n)").removeAttr("style"))):showNotice(resp.message_return,2e3)},error:function(){}}),!1}),$(document).on("click",".jsReputationConnection",function(){var a=$(this).attr("data-userid"),b=$(this).attr("data-url");return $.ajax({url:b+a,type:"POST",xhrFields:{withCredentials:!0},data:{securitytoken:$("#securitytoken").val(),isfromcendol:1},dataType:"json",success:function(b){$("#securitytoken").val(b.securitytoken),!0==b.result?"Unfollow"==b.connection_type?$("#connection-user-"+a).html("<div data-id=\"unfollow\" data-default=\""+b.label_connection+"\" data-userid=\""+a+"\" data-hover=\""+b.word+"\" data-url=\"/profile/unfollow_user/\" class=\"jsReputationConnection W(90px) W(80px)--xs Bgc(c-white) nightmode_Bgc(c-dark-grey-2) Bdc(c-blue) nightmode_Bdc(c-blue-night) C(c-blue) nightmode_C(c-blue-night) Bds(s) Bdw(1px) Fz(12px) Bdrs(3px) Fw(500) H(30px) Lh(30px) Ta(c)\">"+b.label_connection+"</div>"):$("#connection-user-"+a).html("<div data-id=\"follow\" data-userid=\""+a+"\" data-url=\"/profile/follow_user/\" class=\"jsReputationConnection W(90px) W(80px)--xs Bgc(c-blue) nightmode_Bgc(c-blue-night) C(c-white) nightmode_C(c-primary-night) Fz(12px) Bdrs(3px) Fw(500) H(30px) Lh(30px) Ta(c)\">"+b.word):!1==b.result&&showNotice(b.error_message,1500)},error:function(){}}),!1}),$("body").on("click","a.jsLinkNestedPost",function(a){if(a.preventDefault(),parent_post=$(this).attr("data-postid"),target_dom_id="post"+parent_post,target_dom=$("#"+target_dom_id),"undefined"==typeof target_dom[0])$(location).attr("href",$(this).attr("href"));else{var b=$(".jsHeader").length?$(".jsHeader").height()-10:0;$("html, body").animate({scrollTop:target_dom.offset().top-b})}}),$(".button-multi-quote").click(function(){$(this).closest(".entry").toggleClass("o-multi-quoted"),$(this).closest(".entry").hasClass("o-multi-quoted")?$(this).closest(".button-multi-quote").addClass("selected").removeClass("unselect"):$(this).closest(".button-multi-quote").removeClass("selected").addClass("unselect")}),$(".jsShowComments").click(function(a){var b=$(this);if("#"===b.attr("href"))a.preventDefault();else return!0;var c=b.data("postid"),d=b.data("postcount"),e=b.attr("data-replycount"),f=parseInt(b.attr("data-offset")),g=parseInt(b.attr("data-limit"));b.html("Mengambil Data");var h=$.ajax({url:"/misc/get_post_replies/"+(c+"/"+f+"/"+g),method:"GET"});h.done(function(a){if("object"!=typeof a&&(a=$.parseJSON(a)),!0===a.result){var h=$("#comment-nested-"+c);h.html(a.view+h.html()),0<e-g?(1===f&&(b.attr("href","/show_post/"+c+"/"+d),b.removeClass("jsShowComments")),b.html(langcode_replacer(window.KASKUS_lang.load_more_post)),b.attr("data-offset",f+g),b.attr("data-replycount",e-g)):b.hide(),setTimeout(function(){$(window).off("scroll.kslzy resize.kslzy lookup.kslzy click.kslzy"),$(".mls-img").kslzy(300)},300)}else b.html("Gagal Mengambil Data, Coba Lagi")})}),$(".jsShowCommentsDate").click(function(a){var b=$(this);if("#"===b.attr("href"))a.preventDefault();else return!0;var c=b.data("postid"),d=b.data("postcount"),e=b.attr("data-replycount"),f=parseInt(b.attr("data-offset")),g=parseInt(b.attr("data-limit")),h=b.attr("data-location");b.html("Mengambil Data");var j=$.ajax({url:"/misc/get_post_replies_date_"+h+"/"+(c+"/"+f+"/"+g),method:"GET"});j.done(function(a){if("object"!=typeof a&&(a=$.parseJSON(a)),!0===a.result){var j=$("#comment-nested-"+c);"top"===h?j.html(a.view+j.html()):j.html(j.html()+a.view),0<e-g&&null!=a.offset?(1===f&&(b.attr("href","/show_post/"+c+"/"+d),b.removeClass("jsShowComments")),b.html(langcode_replacer(window.KASKUS_lang.load_more_post)),b.attr("data-offset",a.offset),b.attr("data-replycount",e-g)):b.hide(),setTimeout(function(){$(window).off("scroll.kslzy resize.kslzy lookup.kslzy click.kslzy"),$(".mls-img").kslzy(300)},300)}else b.html("Gagal Mengambil Data, Coba Lagi")})}),$(".thread-wrapper").on("click",".vote-btn",function(){var a=$(this).data("target"),b=$(this).data("postid"),c=$(this).data("userid"),d=$(this).data("postuserid"),e=$(this).data("votenum"),f=$(this).data("action"),g=$(this),h=g.closest(".c-reputation").find(".is-up-vote").hasClass("active"),j=g.closest(".c-reputation").find(".is-down-vote").hasClass("active");"string"==typeof a&&a.startsWith("/user/login")&&(location.href=a),$jQ.ajax({url:WAP_KASKUS_URL+"/give_vote/"+b,type:"POST",data:{status:e,securitytoken:$jQ("#securitytoken").val()},xhrFields:{withCredentials:!0},success:function(a){if("object"!=typeof a&&(a=$jQ.parseJSON(a)),$jQ(".sctoken").val(a.securitytoken),$jQ("#qr_securitytoken").val(a.securitytoken),!0==a.result){var e=$jQ(".total_vote"+b);$jQ.each(e,function(b,c){$jQ(c).text(a.total_vote)});var k,l;"cendol"==f?(l=$jQ(".bata"+b),k=$jQ(".cendol"+b)):(l=$jQ(".cendol"+b),k=$jQ(".bata"+b)),$jQ.each(l,function(a,b){$jQ(b).removeClass("active")}),$jQ.each(k,function(a,b){$jQ(b).toggleClass("active")});var m=__forum_id+" thread detail",n=__thread_id,o=g.hasClass("active")?"":"un",p=o+f,q=""==o?"1":"-1";if("cendol"==p||"uncendol"==p?j&&"cendol"==p?dataLayer.push({event:"trackEvent","eventDetails.category":m,"eventDetails.action":p,"eventDetails.label":n,totalCendol:"1",totalBata:"-1",userID:c,userIDHit:d,postId:b}):dataLayer.push({event:"trackEvent","eventDetails.category":m,"eventDetails.action":p,"eventDetails.label":n,totalCendol:q,userID:c,userIDHit:d,postId:b}):("bata"==p||"unbata"==p)&&(h&&"bata"==p?dataLayer.push({event:"trackEvent","eventDetails.category":m,"eventDetails.action":p,"eventDetails.label":n,totalCendol:"-1",totalBata:"1",userID:c,userIDHit:d,postId:b}):dataLayer.push({event:"trackEvent","eventDetails.category":m,"eventDetails.action":p,"eventDetails.label":n,totalBata:q,userID:c,userIDHit:d,postId:b})),showNotice(a.message),!0==a.disable_bata){var r=$jQ(".bata"+b);$jQ.each(r,function(a,b){$jQ(b).removeClass("vote-btn")})}else{var r=$jQ(".bata"+b);$jQ.each(r,function(a,b){$jQ(b).hasClass("vote-btn")||$jQ(b).addClass("vote-btn")})}updateLatestReputation(a,b)}else!1==a.result&&showNotice(a.message_return)}})}),$(".share-url-btn").click(function(){new ClipboardJS("#copy_button",{text:function(){return document.querySelector("#shared_url").value}}),showNotice("Link Tersalin",2e3)}),$(".rate-btn").click(function(){var a=$(this).data("threadid"),b=$(this).data("rate"),c=$(this).attr("data-userid"),d=$(this).attr("data-post-userid");return null!=b&&(0>b||5<b?(showNotice("You submitted an invalid vote."),!1):void(null==a&&(a=$("#thread_id").val()),$.ajax({url:"/threadrate",type:"post",data:{thread_id:a,vote:b,securitytoken:$("#securitytoken").val()},xhrFields:{withCredentials:!0},dataType:"json",success:function(e){if("object"!=typeof e&&(e=$.parseJSON(e)),void 0===e.rate_failed||null==e.rate_failed||0>=e.rate_failed.length){showNotice(e.message);for(var f=$(".like-btn-widget--count"),g=0;g<f.length;g++)if(currObj=$(f[g]),currObj.attr("data-threadid")==a){currObj.parent().addClass("active"),currObj.html(parseInt(currObj.html())+1);break}dataLayer.push({event:"trackEvent","eventDetails.category":"Star Rating","eventDetails.action":"rate "+b,"eventDetails.label":a,totalRate:"1",userID:c,author:d})}else showNotice(e.rate_failed);document.getElementById("securitytoken").value=e.securitytoken}})))}),$(".thread-wrapper").on("click","div.spoiler input",function(){spoilerData=this,"Show"==spoilerData.value?($(".content_"+$(spoilerData).attr("class")).slideDown(0),spoilerData.innerHTML="",spoilerData.value="Hide"):($(".content_"+$(spoilerData).attr("class")).slideUp(0),spoilerData.innerHTML="",spoilerData.value="Show")});var a,b=13;$("#quick_reply_wrapper, .small-reply").on("keyup",".autocomplete-mention",function(c){var d=$(".autocomplete-mention").val();d=d.trim(),0<d.length?c.keyCode===b?(clearTimeout(a),get_autocomplete_mention(d)):(clearTimeout(a),a=setTimeout(function(){return get_autocomplete_mention(d),!1},1e3)):($(".mentionList").html(""),$(".autocomplete-mention").val(""))}),$("#quick_reply_wrapper, .small-reply").on("keydown",".autocomplete-mention",function(a){if(a.keyCode===b)return a.preventDefault(),!1}),$("#quick_reply_wrapper, .small-reply").on("click",".user-mention",function(a){var b=$jQ(this).parents(".form-reply-message").find("textarea"),c=$(this).find(".username-mention").text();insertCaretPosition("[mention]"+c+"[/mention]",b),$(".autocomplete-mention").val(""),$(".mentionList").html(""),$(".jsMentionWrapper").removeClass("is-open"),$(".jsMentionBtn").removeClass("is-active"),a.stopPropagation()}),$(".js-share-btn").click(function(){var a=$(this).data("type");$.ajax({url:WAP_KASKUS_URL+"/misc/update_share_count",type:"POST",data:{share_type:a,thread_id:$("#thread_id").val()},xhrFields:{withCredentials:!0},success:function(a){"object"!=typeof a&&(a=$.parseJSON(a)),"true"==a.success&&$("#total_share_sosial_media").fadeOut(300,function(){var a=$(this).html();0>a.indexOf("K")&&0>a.indexOf("M")&&$(this).html(parseInt(a)+1),$(this).fadeIn(300)})},error:function(){}})}),$("#postlist-wrapper").on("click",".append-post",function(){var a=$(this).data("postid"),b=$(this).data("threadid"),c=$("#securitytoken").val();$.ajax({url:WAP_KASKUS_URL+"/misc/append_first_post/"+b+"/"+a,method:"POST",data:{securitytoken:c},xhrFields:{withCredentials:!0},success:function(b){var c=$.parseJSON(b);1!==c.error&&($(".first-post-container").html(c.text),init_twitter_embed(),init_insta_embed()),showNotice(c.message,1500),$(".sctoken").val(c.securitytoken),$("#post"+a+" .jsShowMenus").click()}})}),$("#postlist-wrapper").on("click",".jsFetchPostSubscribe",function(){if("undefined"!=typeof postSubscribeFetch){postIdToBeFetch=[];var a=$(this).parents(".postWrapper").find(".subscribe-post").data("postid"),b=postSubscribeFetch.indexOf(a);if(-1!==b){var c=Math.max(b-9,0);c+20>postSubscribeFetch.length&&(c=Math.max(postSubscribeFetch.length-20,0));var d=postSubscribeFetch.splice(c,20);for(let a=0;a<d.length;a++)0<$(".subscribe-post[data-postid='"+d[a]+"']").length&&postIdToBeFetch.push(d[a]);0===postIdToBeFetch.length||$.ajax({url:"/misc/fetch_post_subscription_data",method:"POST",data:{post_ids:postIdToBeFetch},xhrFields:{withCredentials:!0},success:function(a){if("object"!=typeof a&&(response=$.parseJSON(a)),!0==response.result){for(let a,b=0;b<postIdToBeFetch.length;b++)a=$(".subscribe-post-container [data-postid='"+postIdToBeFetch[b]+"']").parents(".subscribe-post-container"),a.removeClass("D(n)"),a.addClass("D(f)");for(let a,b=0;b<response.post_ids.length;b++)a=$(".subscribe-post[data-postid='"+response.post_ids[b]+"']"),a.toggleClass("subscribe-post"),a.addClass("unsubscribe-post"),a.html("Matikan Notifikasi")}}})}}})}),$jQ(document).ready(function(){function a(a){$jQ(".jsCendol",a).toggleClass("is-cendol-animate"),$jQ(".is-up-vote",a).toggleClass("is-active");var b=a.parents(".c-reputation__list");b.find(".jsBata").addClass("is-bata").removeClass("is-bata-animate"),b.find(".is-down-vote").removeClass("is-active")}function b(a){$jQ(".jsBata",a).toggleClass("is-bata-animate"),$jQ(".is-down-vote",a).toggleClass("is-active");var b=a.parents(".c-reputation__list");b.find(".jsCendol").addClass("is-cendol").removeClass("is-cendol-animate"),b.find(".is-up-vote").removeClass("is-active")}function c(a){var b=__forum_id+" thread detail",c=__thread_id,d="",e=a.attr("data-action");0!==a.find("span.is-active").length&&(d="un");var f=d+e;_gaq.push(["_trackEvent",b,f,c]),dataLayer.push({event:"trackEvent","eventDetails.category":b,"eventDetails.action":f,"eventDetails.label":c})}$jQ(".vote-post").click(function(){var d=$jQ(this);return post_id=d.attr("data-postid"),status=d.attr("data-status-vote"),security_token=$jQ("#securitytoken").val(),$jQ.ajax({url:WAP_KASKUS_URL+"/give_vote/"+post_id,type:"POST",data:{status:status,securitytoken:security_token},xhrFields:{withCredentials:!0},success:function(e){if("object"!=typeof e&&(e=$jQ.parseJSON(e)),$jQ(".sctoken").val(e.securitytoken),$jQ("#qr_securitytoken").val(e.securitytoken),!0==e.result){c(d),1==status?a(d):b(d),vote_id="#total-vote-"+post_id;var f=$jQ(vote_id+" span").html();0>f.indexOf("K")&&0>f.indexOf("M")&&$jQ(vote_id+" span").text(e.total_vote)}},error:function(){}}),!1})});function get_autocomplete_mention(a){var b=$(".sctoken").val();$.ajax({url:WAP_KASKUS_URL+"/misc/get_user_mention/",type:"post",data:{keyword:a,securitytoken:b},xhrFields:{withCredentials:!0},success:function(a){"object"!=typeof a&&(a=$.parseJSON(a)),a.success?$(".mentionList").html(a.view):$(".mentionList").html(""),$(".sctoken").val(a.securitytoken)}})}function updateLatestReputation(a,b){var c=$("#who-give-cendol-wrapper-"+b);a.disable_bata||(c.find(".whoCendolAjax").remove(),c.prepend(a.view))}function get_MRU(){var d=[];if(localStorage[mru_key]&&(mru=JSON.parse(localStorage[mru_key]),mru)){for(var a in mru)-1<a.search("smilie")&&d.push(mru[a]);var b={smilies:d}}return b||{}}function save_smiley_localStorage(a){if(localStorage){var d=JSON.parse(localStorage.getItem(mru_key));if(d)for(var e in d)e=="smilie"+a&&delete d[e];else var d={};mru_limit==Object.keys(d).length&&delete d[Object.keys(d)[0]],d["smilie"+a]=a,localStorage.setItem(mru_key,JSON.stringify(d))}}function build_smilies_tag_revamp(a){parsed=JSON.parse(a),smilies=JSON.parse(parsed.kaskus);if($jQ("#jsSmiliesTabNavHead").append(parsed.tab),$jQ("#jsSmiliesTabContent").append(parsed.content),$jQ("#tab-mru").show(),"undefined"!=typeof parsed.mru){smilies_mru=parsed.mru.smilies;var b=null;$jQ.each(smilies_mru,function(a,c){b=$("img[alt='"+c+"']")[0],$jQ("#content-mru").append(["<div class=Mend(10px) My(5px)\">","<a href=\"#\" class=\"smilie-content\" data-text=\""+c+"\" data-save=\"1\" onclick=\"return false;\">",b.outerHTML,"</a>","</div>"].join("\n"))})}}var giphy_tab_id;function get_giphy_revamp(a,b){giphy_tab_id=a,$.ajax({method:"POST",url:"/misc/get_giphy/0",data:{keyword:b},success:function(c){giphy=JSON.parse(c),$jQ(giphy_tab_id).html(giphy),$jQ("#search-giphy").focus(),b&&$jQ("#search-giphy").val(b),$jQ("#search-giphy").keydown(function(a){13===a.keyCode&&(clearTimeout(giphy_timer),a.preventDefault(),query=a.target.value,get_giphy_revamp(giphy_tab_id,query))})}})}var giphy_timer,giphy_keyword=null;function search_giphy_revamp(a){clearTimeout(giphy_timer),giphy_timer=setTimeout(function(){return giphy_keyword!=a.value&&(giphy_keyword=a.value,get_giphy_revamp(giphy_tab_id,giphy_keyword)),!1},1e3)}function show_small_reply(a,b){if("#"!==$(a).attr("href"))return void(window.location=$(a).attr("href"));if($("#thread-close-notification").length)move_reply_box(a);else{$(".small-reply").hide();var c=$(a).data("postid"),d="",e=$(a).data("username"),f=$(a).parents(".postWrapper").siblings(".nestedWrapper");return f.find(".jsNestedItemContent").css("display","block"),f.find(".statusFetchData").hide(),d=getPageTextMentionList($(a).closest(".postWrapper").find(".pagetext"),e),$("#reply_textarea_"+c).find("input[name=parent_post]").val($(a).data("context-id")),$("#reply_textarea_"+c+" textarea").val(d),nestedFormActive(a,b),returnReplyBox(),!1}}function returnReplyBox(){$("#quick_reply_wrapper").insertAfter("div.first_post_wrapper")}function getPageTextMentionList(a,b){if(""==b)return"";var c="",d="";""!==b&&b!==current_username&&(d="[mention]"+b+"[/mention] ");for(var e,f=a.find("a.mention"),g=0;g<f.length;g++)e=/.+?\/@([A-Za-z0-9.]*)/.exec(f[g].href),e[1]!==current_username&&0==$(f[g]).parents(".quote").length&&(c=c+"[mention]"+e[1]+"[/mention] "),e[1]===b&&(d="");return c+=d,c}function move_reply_box(a){if("#"!==$(a).attr("href"))return void(window.location=$(a).attr("href"));var b=$("#quick_reply_wrapper")[0],c=$(a).data("postid"),d=$(a).data("username");return mentioned_list=getPageTextMentionList($(a).closest(".postWrapper").find(".pagetext"),d),$(b).find("input[name=parent_post]").val(c),$(b).find("input[name=post_id]").val(c),$(b).find("textarea").val(mentioned_list),$(b).show(),$(b).detach().insertAfter("div#post"+c+" .postWrapper"),$(".jsTextareaBB").show(),$(".jsTextareaReply").hide(),$(".jsTextareaBB").find("textarea").focus(),$("html, body").animate({scrollTop:$("#quick_reply_wrapper").offset().top-$(".jsHeader").outerHeight()-20},1e3),!1}$(document).ready(function(){function b(a){c=a,build_smilies_tag_revamp(a)}$("#postlist-wrapper").on("click",".jsShowRepliesRev",function(a){var b=$(this);if(a.preventDefault(),"1"==b.attr("data-waiting"))return!1;b.attr("data-waiting","1");var c=b.data("postid"),d=b.attr("data-replycount"),e=parseInt(b.attr("data-offset")),f=parseInt(b.attr("data-limit"));b.html("Mengambil Data");var g=$.ajax({url:"/misc/get_post_replies/"+(c+"/"+e+"/"+f+"/2/0"),method:"GET"});g.done(function(a){"object"!=typeof a&&(a=$.parseJSON(a)),!0===a.result?(b.parent().before(a.view),0<d-f?(b.html(langcode_replacer(window.KASKUS_lang.load_more_post)),b.attr("data-offset",e+f),b.attr("data-replycount",d-f)):b.parent().hide(),setTimeout(function(){!0!="MutationObserver"in window&&initLazyload()},300),init_twitter_embed(),init_insta_embed()):b.html("Gagal Mengambil Data, Coba Lagi"),b.attr("data-waiting","0")})}),$("#postlist-wrapper").on("click",".jsShowCommentsRev",function(a){var b=$(this);if(a.preventDefault(),"1"==b.attr("data-waiting"))return!1;b.attr("data-waiting","1");var c=b.data("postid"),d=b.attr("data-replycount"),e=parseInt(b.attr("data-offset")),f=parseInt(b.attr("data-limit"));b.html("Mengambil Data");var g=$.ajax({url:"/misc/get_post_replies/"+(c+"/"+e+"/"+f)+"/-1/0/1/",method:"GET"});g.done(function(a){"object"!=typeof a&&(a=$.parseJSON(a)),!0===a.result?(b.parent().after(a.view),0<d-f?(b.html(langcode_replacer(window.KASKUS_lang.load_more_post)),b.attr("data-offset",e+f),b.attr("data-replycount",d-f)):b.parent().hide(),setTimeout(function(){!0!="MutationObserver"in window&&initLazyload()},300),init_twitter_embed(),init_insta_embed()):b.html("Gagal Mengambil Data, Coba Lagi"),b.attr("data-waiting","0")})}),$("#postlist-wrapper").on("click",".jsShowCommentsDateRev",function(a){var b=$(this);if(a.preventDefault(),"1"==b.attr("data-waiting"))return!1;b.attr("data-waiting","1");var c=b.data("postid"),d=b.attr("data-replycount"),e=parseInt(b.attr("data-offset")),f=parseInt(b.attr("data-limit")),g=b.attr("data-location");b.html("Mengambil Data");var h=$.ajax({url:"/misc/get_post_replies_date_"+g+"/"+(c+"/"+e+"/"+f+"/0/"),method:"GET"});h.done(function(a){"object"!=typeof a&&(a=$.parseJSON(a)),!0===a.result?("top"===g?b.parent().after(a.view):b.parent().before(a.view),0<d-f&&null!=a.offset?(b.html(langcode_replacer(window.KASKUS_lang.load_more_post)),b.attr("data-offset",a.offset),b.attr("data-replycount",d-f)):b.parent().hide(),setTimeout(function(){!0!="MutationObserver"in window&&initLazyload()},300),init_twitter_embed(),init_insta_embed()):b.html("Gagal Mengambil Data, Coba Lagi"),b.attr("data-waiting","0")})}),$("#postlist-wrapper").on("click",".nested-toggle",function(a){a.preventDefault();var b=$(this).data("reply-id");$("#nestedbit-deleted-"+b).hide(),$("#nestedbit-"+b).show()}),$("#postlist-wrapper").on("click",".postbit-toggle",function(a){a.preventDefault();var b=$(this).data("reply-id");$("#postdeleted"+b).hide(),$("#postcontent"+b).show()}),$("body").on("click",".quote-btn",function(){var a="",b=$(this).data("postid");if(null!=$.cookie("kaskus_multiquote_"+__thread_id)){for(a=$.cookie("kaskus_multiquote_"+__thread_id).split(","),store_post_id=$.cookie("kaskus_multiquote_"+__thread_id),is_exist=!1,i=0;i<a.length;i++)a[i]==b&&(is_exist=!0,store_post_id=store_post_id.split(","+b).join(""),store_post_id=store_post_id.split(b+",").join(""),store_post_id=store_post_id.split(b).join(""));!1==is_exist&&(store_post_id+=","+b)}else store_post_id=b;if(""==store_post_id)return $.cookie("kaskus_multiquote_"+__thread_id,null,{expires:0,path:"/",secure:!1}),$("#post"+b).toggleClass("is-multiquoted"),countCookie(),!0;$("#post"+b).toggleClass("is-multiquoted");var c=new Date;c.setTime(c.getTime()+86400000),$.cookie("kaskus_multiquote_"+__thread_id,store_post_id,{expires:c,path:"/",secure:!1}),countCookie()}),$(".preview-btn").click(function(){$(this).parents("form").attr("data-do-redirect","1")}),$(".thread-tools").click(function(){var a=$(this).data("operation");$("#do").val(a),$("#threadadminform").submit()}),$("#load-more-btn").click(function(){}),$(".form-reply-message").on("click",".smilies-tab",function(){var a=$(this).data("id"),b=$(this).data("categoryname");"Giphy"==b&&get_giphy_revamp(a),$jQ("#jsSmiliesTabNavHead li").removeClass("active"),$jQ(this).parent().addClass("active"),$jQ(".tabcontent").hide(),$jQ(a).show()});var c=null;$(".form-reply-message").on("click",".jsSmiliesBtn",function(){if(localSmilies=get_MRU(),localSmilies)var d={smilies:$.param(localSmilies)};null!=c||$jQ.ajax({method:"POST",url:"/misc/get_smilies/0",data:d||{},success:b})}),$(".form-reply-message").on("click",".smilie-content",function(){var a=$jQ(this).parents(".form-reply-message").find("textarea"),b=$(this).data("text"),c=$(this).data("save");insertCaretPosition(b,a),c&&save_smiley_localStorage(b)}),$(".thread-wrapper").on("click",".reply-btn",function(a){var b=$(this).data("postid"),c=$("#post"+b).find(".nestedWrapper");0==c.length?move_reply_box(this):(d=b,show_small_reply(this,a))}),countCookie(),$jQ("body").on("click",".lapor-hansip",function(){var a=$(this).attr("data-reported-id"),b=$(this).attr("data-reported-type"),c=$("#lapor-hansip-form"),d=c.find("input[name=reportedtype]");0<d.length?d.val(b):c.append("<input type=\"hidden\" value=\""+b+"\" name=\"reportedtype\">");var e=c.find("input[name=reportedid]");e.val(a)}),$("body").on("submit",".form-reply-message",function(){var a=$(this);if("1"==a.attr("data-do-redirect"))return!0;var b=a.attr("action"),c=a.serialize();return showNotice("Menyimpan balasan",1e3),$.post(b,c,function(b){if("undefined"!=typeof b){if("undefined"!=typeof b.message&&showNotice(b.message,3e3),"undefined"!=typeof b.redirect)return void setTimeout(function(){location.href=b.redirect},1e3);if(!1===b.error){if(showNotice("Post balasan berhasil",3e3),"undefined"!=typeof b.post){var c=$.cookie("post_order");$.isEmptyObject(c)&&(c="1");var d=b.post;if(b.nested){var e=a.parents(".nestedWrapper");if(0<e.length)d=$(d).find(".nestedbit.postWrapper").addClass("removeAfterLoad"),0>c?e.find(".jsNestedItemContent").find(".statusFetchData").first().after(d):e.find(".jsNestedItemContent").find(".statusFetchData").last().before(d);else{if(e=$("#postcontent"+b.post_id),0==e.length)return void setTimeout(function(){location.href="/post/"+b.new_post_id},1e3);e.after(d),d=$(d).find(".nestedbit.postWrapper"),returnReplyBox()}if(1==b.auto_subscribe_user){var f=$("#post"+b.post_id).find(".subscribe-post");f.removeClass("subscribe-post"),f.addClass("unsubscribe-post"),f.text("Matikan Notifikasi")}}else $(".postlist-number").each(function(){var a=parseInt($(this).attr("data-num"))+1;$(this).html("#"+a),$(this).attr("data-num",a)}),$("#postlist-wrapper").html(d+$("#postlist-wrapper").html());var g=$(d).attr("id");$("html, body").animate({scrollTop:$("#"+g).offset().top-$(".jsHeader").outerHeight()-20},1e3);var h=a.parent("div").siblings(".loadMoreAD");0<h.length&&0>c&&(h.attr("data-offset",+h.attr("data-offset")+1),h.attr("data-replycount",+h.attr("data-replycount")+1));var j=a.parent(".small-reply");j.hide();var k=a.parent("div").siblings(".simple-reply");k.show()}a.find("[name=message]").val("")}$(".sctoken").val(b.securitytoken)}},"json"),!1}),$("body").on("click",".getNestedAD",function(a){getNestedAscendingDescending(this,a)}),$("body").on("click",".loadMoreAD",function(a){getNestedAscendingDescending(this,a)}),$("body").on("click",".loadMoreTopAD",function(a){getNestedAscendingDescending(this,a)}),$("body").on("click",".loadPrevAD",function(a){getNestedAscendingDescending(this,a)}),$("body").on("click",".jsShowNestedTrigger",function(){trackShowNested(this)}),$("body").on("click",".simple-reply",function(a){d=$(this).attr("data-postid"),nestedFormActive(this,a)});var d=null;$(document).on("click",function(a){if(null!=d){var b=$("#reply_textarea_"+d),c=$("#reply_box_"+d);0===$(a.target).closest(b).length&&(b.hide(),c.show(),moveToolsReply(null))}}),$("#request-delete-form-modal").on("click","#submit-request-delete",function(a){a.preventDefault(),securitytoken=$(".sctoken").val(),$("#form-request-delete").append($("<input type=\"hidden\" name=\"securitytoken\" value=\""+securitytoken+"\">")),show_request_delete_popup($("#form-request-delete").serialize())}),$(".request-delete").click(function(a){a.preventDefault(),show_request_delete_popup()})});function nestedFormActive(a,b){var c=$jQ(a).attr("data-postid");moveToolsReply(c),$("#reply_box_"+c).hide(),$("#reply_textarea_"+c).show(),$("html, body").animate({scrollTop:$("#reply_textarea_"+c).offset().top-$(".jsHeader").outerHeight()-20},1e3),$("#reply_textarea_"+c).find("textarea").focus(),b.stopPropagation()}function moveToolsReply(a){if(null!=a){var b=$("#reply_textarea_"+a).find(".nestedSmiley");$(".jsSmiliesWrapper").detach().insertAfter(b),$(".jsMentionWrapper").detach().insertAfter(b)}else{var c=$("#quick_reply_wrapper").find(".firstPostSmiley");$(".jsSmiliesWrapper").detach().insertAfter(c),$(".jsMentionWrapper").detach().insertAfter(c)}}function getNestedAscendingDescending(a,b){var c=$jQ(a),d=c.parents(".nestedWrapper").find(".jsNestedItemContent"),e=d.find(".statusFetchData"),f=d.find(".statusFetchDataTop"),g=d.find(".loadMoreAD"),h=d.find(".loadMoreTopAD"),j=d.find(".limitMoreAD"),k=null;c.hasClass("jsShowNestedTrigger")&&(k=c,c.removeClass("getNestedAD"),c.hide(),c=d.find(".loadMoreAD")),g.hide(),h.hide(),j.hide(),e.show(),f.show(),"#"===c.attr("href")&&b.preventDefault();var l=c.data("postid"),m=parseInt(c.attr("data-offset")),n=parseInt(c.attr("data-limit")),o=parseInt(c.attr("data-order")),p=parseInt(c.attr("data-replycount")),q=c.hasClass("loadMoreTopAD");c.hide();var r=$jQ.ajax({url:"/misc/get_post_replies/"+(l+"/"+m+"/"+n+"/"+o+"/"+0+"/"+0),method:"GET"});r.done(function(a){if("object"!=typeof a&&(a=$jQ.parseJSON(a)),!0===a.result){e.hide(),f.hide(),g.show(),q?f.after(a.view):e.before(a.view),d.find("#reply_textarea_"+l).is(":visible")||d.find(".simple-reply").show();var b=$(a.view).filter(".nestedbit").length;if(q){c.attr("data-offset",m-b),j.show(),1>m?h.bind("click",function(){return!1}):(c.show(),h.unbind("click"),d.find(".prevNested").html("<a href=\"javascript:void(0);\">"+langcode_replacer(window.KASKUS_lang.show_previous_reply,[m])+"</a>"))}else{var o=m+b,r=h.attr("data-offset");"undefined"!=typeof r&&(0>r?h.hide():h.show()),g.attr("data-offset",o),o<=p&&(o==p?g.bind("click",function(){return!1}):g.unbind("click"))}null!==k&&k.show();var s=d.find(".loadMoreTopAD").attr("data-offset"),t=isNaN(s)?1:parseInt(s)+n+1,u=g.attr("data-offset"),v=isNaN(u)?p:parseInt(u);d.find(".totalNestedOf").text(langcode_replacer(window.KASKUS_lang.show_range_reply,[t,v,p])),d.find(".moreNested").html(v<p?"<a href=\"javascript:void(0);\">"+langcode_replacer(window.KASKUS_lang.show_more_reply,[p-v])+"</a>":""),init_twitter_embed(),init_insta_embed()}else e.html("Gagal mengambil data"),e.show()})}function trackShowNested(a){var b=__forum_id+" thread detail",c=__thread_id,d=$jQ(a).parents(".nestedWrapper").find(".jsNestedItemContent").hasClass("is-hide"),e=d?"open nested":"close nested";_gaq.push(["_trackEvent",b,e,c]),dataLayer.push({event:"trackEvent","eventDetails.category":b,"eventDetails.action":e,"eventDetails.label":c})}function countCookie(){var a=$.cookie("kaskus_multiquote_"+__thread_id);if($.isEmptyObject(a))$("#btn-reply-thread").html("Balas Thread");else{var b=a.split(",");$("#btn-reply-thread").html("Kutip "+b.length+" Post")}}function laporHansip(a){var b=$(a),c=b.serialize(),d=b.find("input[name=reportedid]").val(),e=b.find("select").val(),f=b.find("textarea").val(),g=b.find("input[name=reportedtype]").val(),h=$jQ("#securitytoken").val();b.find(".errorMessage").addClass("D(n)"),$.ajax({url:"/misc/lapor_hansip/",type:"POST",data:{reported_id:d,category:e,reason:f,reported_type:g,securitytoken:h},success:function(a){var c=JSON.parse(a);if(c.result){$("#jsLaporHansip").removeClass("is-open"),$("body").removeClass("o-hidden"),showNotice(c.message,2e3),b.find("textarea").val("");var d=b.find("select");d.val(d.find("option:first").val())}else{var e=c.errors;for(var f in e){var g=".error"+f[0].toUpperCase()+f.slice(1);b.find(g).text(e[f]),b.find(g).removeClass("D(n)")}}$jQ(".sctoken").val(c.securitytoken)}})}$(document).ready(function(){yall({observeChanges:!0,lazyBackgroundClass:"embed_twitter",threshold:300,observeRootSelector:"div.parentWrapper"}),yall({observeChanges:!0,lazyBackgroundClass:"embed_instagram",threshold:300,observeRootSelector:"div.parentWrapper"}),init_twitter_embed(),init_insta_embed(),bindPostListNext()});var postListLoading=!1;function bindPostListNext(){0<$("#load-more-btn").length&&(window.addEventListener("resize",fetch_more_post,{passive:!0}),window.addEventListener("scroll",fetch_more_post,{passive:!0}),window.addEventListener("touch",fetch_more_post,{passive:!0}),window.addEventListener("click",fetch_more_post,{passive:!0}))}function removePostListAutoload(){window.removeEventListener("resize",fetch_more_post),window.removeEventListener("scroll",fetch_more_post),window.removeEventListener("touch",fetch_more_post),window.removeEventListener("click",fetch_more_post),$("#load-more-btn").hide()}function fetch_more_post(){var a=$("#load-more-btn");if(!postListLoading&&isElementInViewport(a)){postListLoading=!0;var b=a.data("thread_id"),c=parseInt(a.attr("data-offset"));a.html("Mengambil data");var d=a.attr("onclick");a.attr("onclick","return false;");var e=$("#quick_reply_wrapper form").attr("data-do-redirect");return $.get("/thread/get_post_list/"+b+"/"+c,function(b){if("object"!=typeof b&&(b=$.parseJSON(b)),b.result){if($("#end-anchor").before(b.view),setTimeout(function(){!0!="MutationObserver"in window&&initLazyload()},300),init_twitter_embed(),init_insta_embed(),$(".sctoken").val($("#firstpost-sctoken").val()),$(".form-reply-message").attr("data-do-redirect",e),a.attr("onclick",d),"undefined"!=typeof postSubscribeFetch&&(postSubscribeFetch=postSubscribeFetch.concat(b.post_ids)),b.last_load)a.hide(),removePostListAutoload();else{var f=parseInt(a.data("limit"));a.attr("data-offset",c+f),a.html("Lanjut Gan!")}postListLoading=!1}}),$("#end-anchor").focus(),!1}}function insertCaretPosition(a,b){var c=jQuery(b),d=c.val(),e=c[0].selectionStart,f=c[0].selectionEnd;$(b).val(d.substring(0,e)+a+d.substring(f,d.length)),c.focus(),c[0].selectionStart=e+a.length,c[0].selectionEnd=e+a.length}function show_request_delete_popup(a=""){let b="GET",c="<img id=\"whoposted-loading-image\" src=\""+assetsFolderNew+"/images/icon-load-orange.gif\" width=\"40\" height=\"40\" alt=\"notification-loading\" />";""===a?$("#request-delete-form-modal .modal-section").html(c):($("#request-delete-form-modal .modal-section button").parent().html(c),b="POST"),$.ajax({url:"/thread_misc/request_delete/"+__thread_id,method:b,data:a,dataType:"json",xhrFields:{withCredentials:!0},success:function(a){"undefined"!=typeof a.view&&($("#request-delete-form-modal .modal-section").html($(a.view).find(".modal-section").html()),bindJsCloseModal()),$(".sctoken").val(a.securitytoken),!0===a.result&&setTimeout(function(){$(".jsCloseModal").click()},3e3)}})}