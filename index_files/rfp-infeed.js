!function(){function e(t,n,o){function r(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(i)return i(a,!0);var d=new Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){return r(t[a][1][e]||e)},l,l.exports,e,t,n,o)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<o.length;a++)r(o[a]);return r}return e}()({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.AdInfoModelBase=void 0;var o=e("./network_ad"),r=e("./util"),i=function(){function e(e,t,n){this.base_info=this.store(e,t,n)}return e.prototype.store=function(t,n,i){var a={};return r.Util.forEach(e.base_keys,function(e){a[e]=t[e]}),a.click_url=o.NetworkAd.buildClickRequestUrl(n,t,i),a},e.base_keys=["advertiser_id","ad_id","title","description","optout_click","dat","conv_type","session_id","url_scheme","cta_text","click_url","creative_html","creative_width","creative_height"],e}();n.AdInfoModelBase=i},{"./network_ad":7,"./util":10}],2:[function(e,t,n){"use strict";e("../rfp-common/rfp").RFP.arguments=function(){for(var e=document.getElementsByTagName("script"),t=e[e.length-1].src,n=t.substring(t.indexOf("?")+1),o=n.split("&"),r={},i=0,a=o;i<a.length;i++){var s=a[i],c=s.split("="),d=decodeURIComponent(c[0]),l=decodeURIComponent(c[1]);r[d]=l}return r}()},{"../rfp-common/rfp":9}],3:[function(e,t,n){"use strict";var o=e("../rfp-common/rfp");o.RFP.Common=o.RFP.Common||{},function(){if(o.RFP.arguments.country){var e=o.RFP.arguments.country,t=o.RFP.Common.Locale.Config[e];if(t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o.RFP.Common.Config[n]=t[n])}}()},{"../rfp-common/rfp":9}],4:[function(e,t,n){"use strict";e("../rfp").RFP.Common.Locale.Config.ir={host:{ad:"ad-ir.rfp.fout.jp",imp:"imp-ir.rfp.fout.jp",click:"click-ir.rfp.fout.jp",conv:"conv-ir.rfp.fout.jp",assets:"js-ir.rfp.fout.jp"}}},{"../rfp":9}],5:[function(e,t,n){"use strict";var o=e("./rfp");o.RFP.Common=o.RFP.Common||{},o.RFP.Common.Locale=o.RFP.Common.Locale||{},o.RFP.Common.Locale.Config=o.RFP.Common.Locale.Config||{},o.RFP.Common.Config={host:{ad:"ad.rfp.fout.jp",imp:"imp.rfp.fout.jp",click:"click.rfp.fout.jp",conv:"conv.rfp.fout.jp",assets:"js.rfp.fout.jp"},protocol:"https:",ad_type:{infeed:5,display:14},version:"1.2.16",conv:{max_request_per_page:10},jsonp_timeout_ms:1e4}},{"./rfp":9}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.InViewObserver=void 0;var o=e("./util"),r=function(){function e(){}return e.addElement=function(t){e.elements.indexOf(t)<0&&e.elements.push(t)},e.removeElement=function(t){var n=e.elements.indexOf(t);n>=0&&e.elements.splice(n,1)},e.observe=function(t,n){void 0===t&&(t=0),void 0===n&&(n=1),t=+t||0,n=+n||1;var r=[],i=function(){e.elements.forEach(function(e){var t=o.Util.inView(e,n),i=r.indexOf(e),a=i>-1,s=t&&!a,c=!t&&a;s&&(r.push(e),o.Util.emit("enter",e)),c&&(r.splice(i,1),o.Util.emit("exit",e))})};["scroll","resize","load"].forEach(function(e){addEventListener(e,o.Util.throttle(i,t))}),window.MutationObserver&&addEventListener("DOMContentLoaded",function(){new MutationObserver(o.Util.throttle(i,t)).observe(document.body,{attributes:!0,childList:!0,subtree:!0})})},e.elements=[],e}();n.InViewObserver=r},{"./util":10}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.NetworkAd=void 0;var o=e("./network_base"),r=e("./rfp"),i=e("./util"),a=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.fetchAds=function(e,t,n,o,r){var a=function(e,a){if(e)return void o(e);var s=i.Util.map(a.items,function(e){return new n(e,t,r)});o(null,s,a)};this.callJsonAPI(e,a,t)},t.notifyImp=function(e,t,n){var o=this.buildImpRequestUrl(e,t,n);this.sendBeaconRequest(o)},t.notifyTpImp=function(e,t){var n=this,o=e.toObject(),r=o.tp_imp_urls;r&&i.Util.isArray(r)&&r.length>0&&i.Util.forEach(r,function(e){n.sendBeaconRequest(e)});var a=o.tp_imp_scripts;a&&i.Util.isArray(a)&&a.length>0&&i.Util.forEach(a,function(e){n.sendRequestViaImpScript(e,t)})},t.callSyncURLs=function(e){var n=this;Object.prototype.hasOwnProperty.call(e,"sync_urls")&&0!==e.sync_urls.length&&i.Util.forEach(e.sync_urls,function(e){t.syncedURLs[e]||(n.sendBeaconRequest(e),t.syncedURLs[e]=!0)})},t.callSyncIFrameURLs=function(e){var n=this;Object.prototype.hasOwnProperty.call(e,"sync_iframe_urls")&&0!==e.sync_iframe_urls.length&&i.Util.forEach(e.sync_iframe_urls,function(e){t.syncedURLs[e]||(n.sendRequestViaIFrame(e),t.syncedURLs[e]=!0)})},t.buildAdRequestUrl=function(e){var t=r.RFP.Common.Config;return t.protocol+"//"+t.host.ad+"/ad?"+e.join("&")},t.buildImpRequestUrl=function(e,t,n){var o=r.RFP.Common.Config,a=t.toObject(),s=["adspot_id="+encodeURIComponent(e),"dat="+a.dat,"session_id="+a.session_id,"ad_id="+a.ad_id,"cachebuster="+this.makeCacheBuster(),"sdk_version="+o.version];if(i.Util.isObject(n)&&n.device_id){var c=btoa(unescape(encodeURIComponent(n.device_id)));s.push("audience_id="+encodeURIComponent(c)),s.push("audience_id_type=0")}return o.protocol+"//"+o.host.imp+"/imp?"+s.join("&")},t.buildClickRequestUrl=function(e,t,n){var o=r.RFP.Common.Config,a=t,s=["adspot_id="+encodeURIComponent(e),"dat="+a.dat,"session_id="+a.session_id,"ad_id="+a.ad_id,"redirect_url="+encodeURIComponent(a.redirect_url),"cachebuster="+this.makeCacheBuster(),"sdk_version="+o.version];if(i.Util.isObject(n)&&n.device_id){var c=btoa(unescape(encodeURIComponent(n.device_id)));s.push("audience_id="+encodeURIComponent(c)),s.push("audience_id_type=0")}return s.push("rd="),o.protocol+"//"+o.host.click+"/click?"+s.join("&")},t.syncedURLs={},t}(o.NetworkBase);n.NetworkAd=s},{"./network_base":8,"./rfp":9,"./util":10}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.NetworkBase=void 0;var o=e("./rfp"),r=e("./util"),i=function(){function e(){}return e.makeCacheBuster=function(){return Math.floor(1e13*Math.random())},e.sendRequest=function(t){var n=e._createRequestInstance();n.open("GET",t,!0),n.withCredentials=!0,n.send()},e.sendBeaconRequest=function(e){(new Image).src=e},e.sendRequestViaImpScript=function(e,t){for(var n=(new DOMParser).parseFromString(e,"text/html"),o=n.getElementsByTagName("script"),r=0;r<o.length;r++){for(var i=o[r],a=i.attributes,s=document.createElement("script"),c=0;c<a.length;c++)s.setAttribute(a[c].name,a[c].nodeValue);s.innerHTML=i.innerHTML,t.appendChild(s)}},e.sendRequestViaIFrame=function(e){var t=document.createElement("iframe");t.style.display="none",t.src=e,document.body.appendChild(t)},e.callJsonAPI=function(t,n,o){e._supportXHR2()?e.sendAjaxRequest(t,n):e.sendJSONPRequest(t,n,o)},e.sendAjaxRequest=function(t,n){var o=e._createRequestInstance();o.onload=function(){try{var e=r.Util.jsonParse(o.responseText);n(null,e)}catch(e){return void n(e)}},o.onerror=function(){n(new Error("Network error"))},o.ontimeout=function(){n(new Error("Network timeout"))},o.onprogress=function(){},o.open("GET",t),o.withCredentials=!0,o.send()},e.sendJSONPRequest=function(t,n,r){var i="rfp-jsonp-"+r;if(!document.getElementById(i)){var a=e._buildJSONPCallbackName(r),s=t+"&callback="+encodeURIComponent("RFP."+a),c=e._buildScriptElement(s,i),d=o.RFP.Common.Config.jsonp_timeout_ms,l=window.setTimeout(function(){o.RFP[a]=function(){},n(new Error("Ad request timeout"))},d);o.RFP[a]=e._buildJSONPCallback(l,c,a,n),e._appendScriptElement(c)}},e._supportXHR2=function(){var e=navigator.userAgent.toLowerCase(),t=/(msie) ([\w.]+)/.exec(e)||[];return!(parseInt(t[2]||99,10)<=7||!window.XDomainRequest&&!window.XMLHttpRequest)},e._createRequestInstance=function(){return window.XDomainRequest?new window.XDomainRequest:new XMLHttpRequest},e._buildJSONPCallbackName=function(e){return"AdJSONPCallback_"+e},e._buildScriptElement=function(e,t){var n=document.createElement("script");return n.src=e,n.id=t,n.type="text/javascript",n.async=!0,n.charset="utf-8",n},e._appendScriptElement=function(e){var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)},e._buildJSONPCallback=function(e,t,n,r){return function(i){return clearTimeout(e),t.parentNode.removeChild(t),delete o.RFP[n],r(null,i)}},e}();n.NetworkBase=i},{"./rfp":9,"./util":10}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.RFP=void 0;var o=void 0===window.RFP?{}:window.RFP;n.RFP=o,window.RFP=o},{}],10:[function(require,module,exports){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Util=void 0;var Util=function(){function Util(){}return Util.forEach=function(e,t,n){if(Array.prototype.forEach)return Array.prototype.forEach.call(e,t,n);if(void 0===e)throw new TypeError;if("function"!=typeof t)throw new TypeError;for(var o=e.length>>>0,r=0;r<o;r++)r in e&&t.call(n,e[r],r,e)},Util.map=function(e,t,n){if(Array.prototype.map)return Array.prototype.map.call(e,t,n);if(void 0===e)throw new TypeError;if("function"!=typeof t)throw new TypeError;for(var o=e.length>>>0,r=[],i=0;i<o;i++)i in e&&(r[i]=t.call(n,e[i],i,e));return r},Util.objectSeal=function(e){return Object.seal?Object.seal(e):e},Util.jsonParse=function(jsonStr){return window.JSON?window.JSON.parse(jsonStr):eval("("+jsonStr+")")},Util.waitDomReady=function(e){function t(){try{document.documentElement.doScroll("left")}catch(e){return void setTimeout(t,0)}e()}var n=!1;if("complete"===document.readyState)return void e();if(document.addEventListener)document.addEventListener("DOMContentLoaded",function(){e(),n=!0},!1),window.addEventListener("load",function(){n||e()},!1);else if(window.attachEvent)window.ActiveXObject&&window===window.top?t():window.attachEvent("onload",e);else{var o=window.onload;window.onload=function(t){"function"==typeof o&&o.call(window,t),e()}}},Util.extend=function(e,t){for(var n in t)e[n]=t[n];return e},Util.inherits=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.baseConstructor=t},Util.isObject=function(e){var t=_typeof(e);return"function"===t||"object"===t&&!!e},Util.isFunction=function(e){return"[object Function]"===Object.prototype.toString.call(e)},Util.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},Util.isSmartPhone=function(e){void 0===e&&(e=window.navigator.userAgent);var t=e.toLowerCase();return-1!==t.indexOf("iphone")||-1!==t.indexOf("ipad")||-1!==t.indexOf("ipod")||-1!==t.indexOf("android")},Util.throttle=function(e,t){var n=this;void 0===t&&(t=0),t=+t||0;var o=Date.now(),r=o;return function(){var i=Date.now();(r+t-i<0||i-o<t)&&(e.apply(n),r=Date.now())}},Util.on=function(e,t){Util.handlers[e]||(Util.handlers[e]=[]),Util.handlers[e].push(t)},Util.one=function(e,t){Util.signals[e]||(Util.signals[e]=[]),Util.signals[e].push(t)},Util.emit=function(e,t){if(Util.signals[e])for(;Util.signals[e].length;)Util.signals[e].pop()(t);if(Util.handlers[e])for(var n=Util.handlers[e].length;--n>-1;)Util.handlers[e][n](t)},Util.inView=function(e,t){var n=e.getBoundingClientRect(),o={t:n.bottom,r:window.innerWidth-n.left,b:window.innerHeight-n.top,l:n.right},r={x:t*n.width,y:t*n.height};return o.t>r.y&&o.r>r.x&&o.b>r.y&&o.l>r.x},Util.handlers={},Util.signals={},Util}();exports.Util=Util},{}],11:[function(e,t,n){"use strict";function o(e,t){for(var n=0,o=e.length;n<o;n++)if(e[n].toObject().ad_id===t)return e[n]}Object.defineProperty(n,"__esModule",{value:!0}),n.AdController=void 0;var r=e("../rfp-common/rfp"),i=e("../rfp-common/util"),a=e("./ad_view"),s=e("./network"),c=e("./passback_ad_view"),d=e("./placement_info_model"),l=function(){function e(e){if(!e||!e.adspot_id)throw new TypeError("adspot_id is required");this.adspot_id=e.adspot_id,this.loaded_ads=[],this.raw_res=null,this.placement_info={},this.request_sequence=0,this.device_id=e.device_id}return e.prototype.loadAds=function(e){var t=this;void 0===e&&(e=function(){});var n=this.adspot_id,o=this.request_sequence,r={device_id:this.device_id};s.Network.fetchInFeedAds(n,o,function(o,r,i){if(o)return void e(o);var a=new d.PlacementInfoModel(i,n);t.loaded_ads=t.loaded_ads.concat(r),t.request_sequence++,t.placement_info=a,t.raw_res=i,e(null)},r)},e.prototype.notifyImp=function(e,t){if(!e||"0"===e||!parseInt(e,10)&&"string"!=typeof e)throw new TypeError("ad_id is required");var n=o(this.loaded_ads,e);if(!n)throw new TypeError("invalid ad id "+e);s.Network.notifyImp(this.adspot_id,n),s.Network.notifyTpImp(n,t)},e.prototype.getLoadedAds=function(){return i.Util.map(this.loaded_ads,function(e){return e.toObjectWithPublicParams()})},e.prototype.getPlacementInfo=function(){return"function"!=typeof this.placement_info.toObject?{}:this.placement_info.toObject()},e.prototype.getRawRes=function(){return this.raw_res},e.prototype.showAd=function(e,t){if(e instanceof a.AdView||"function"==typeof r.RFP.InFeed.VideoAdView&&e instanceof r.RFP.InFeed.VideoAdView){var n=o(this.loaded_ads,t);if(!n)return;var i=n.toObjectWithPublicParams(),s=this.getPlacementInfo();return e.show(i,s)}if(e instanceof c.PassbackAdView)return e.show()},e}();n.AdController=l},{"../rfp-common/rfp":9,"../rfp-common/util":10,"./ad_view":13,"./network":15,"./passback_ad_view":16,"./placement_info_model":17}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.AdInfoModel=void 0;var o=e("../rfp-common/ad_info_model_base"),r=e("../rfp-common/util"),i=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=function(e){function t(t,n,o){var r=e.call(this,t,n,o)||this;return r.info=r.storeExtended(t),r}return i(t,e),t.prototype.toObject=function(){return this.info},t.prototype.toObjectWithPublicParams=function(){var e=this,n={};return r.Util.forEach(t.publicKeys,function(t){n[t]=e.info[t]}),n},t.prototype.storeExtended=function(e,n){var o=this.base_info;return r.Util.forEach(t.keys,function(t){o[t]=e[t]}),r.Util.objectSeal(o)},t.keys=["main_image_url","displayed_advertiser","tp_imp_urls","tp_imp_scripts","vast_xml"],t.publicKeys=["title","description","click_url","ad_id","main_image_url","displayed_advertiser","optout_click","vast_xml","cta_text","creative_html","creative_width","creative_height"],t}(o.AdInfoModelBase);n.AdInfoModel=a},{"../rfp-common/ad_info_model_base":1,"../rfp-common/util":10}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.AdView=void 0;var o=e("../rfp-common/util"),r=function(){function e(e,t,n){this.showed=!1,this.template=t,this.el=e,this.options=o.Util.isObject(n)?n:{},this.showed=!1}return e.prototype.show=function(e,t){if(!this.el.parentNode)return void(window.console&&"function"==typeof console.info&&console.info("The ad place not found. Multiple loading tag may have been placed at same page."));o.Util.isFunction(this.options.before_render)&&(e=this.options.before_render(e,t));var n=o.Util.extend({},e);"string"==typeof n.main_image_url&&(n.creative_block_element='<div class="rfp-creative-block-element"><img src="'+e.main_image_url+'" /></div>');var r=this.template.render(n),i=this.buildHtmlDomList(r),a=this.swapTagToAd(i);return this.showed=!0,a},e.prototype.buildHtmlDomList=function(e){var t=document.createElement("div");return t.innerHTML=e,t.children},e.prototype.swapTagToAd=function(e){var t,n=e.length;if(this.options.use_wrapper)if(n>1){for(var o=document.createElement("div"),r=0;r<n;r++)o.appendChild(e[r].cloneNode(!0));t=this.el.parentNode.insertBefore(o,this.el)}else{var i=e[0].cloneNode(!0);t=this.el.parentNode.insertBefore(i,this.el)}else{for(var r=0;r<n;r++)this.el.parentNode.insertBefore(e[r].cloneNode(!0),this.el);t=this.el.parentNode.children}return this.el.parentNode.removeChild(this.el),t},e}();n.AdView=r},{"../rfp-common/util":10}],14:[function(e,t,n){"use strict";function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=e("../rfp-common/in_view_observer"),i=e("../rfp-common/rfp"),a=e("../rfp-common/util"),s=e("./ad_controller"),c=e("./ad_view"),d=e("./network"),l=e("./passback_ad_view"),u=e("./template");i.RFP.InFeed=void 0===i.RFP.InFeed?{}:i.RFP.InFeed,i.RFP.InFeed.Default=function(){function e(){if(document.querySelectorAll)return document.querySelectorAll("[data-rfp-adspot-id]");for(var e=[],t=document.body.getElementsByTagName("*"),n=t.length,o=0;o<n;o++)t[o].getAttribute("data-rfp-adspot-id")&&e.push(t[o]);return e}function t(e){if(document.querySelectorAll)return document.querySelectorAll("[data-rfp-adspot-id="+e+"]");for(var t=[],n=document.body.getElementsByTagName("*"),o=n.length,r=0;r<o;r++){(n[r].getAttribute("data-rfp-adspot-id")||"")===e&&t.push(n[r])}return t}function n(e){var n=t(e);a.Util.forEach(n,function(e){e.removeAttribute("data-rfp-adspot-id")})}function f(){return window.context}function p(){var e=f();e&&a.Util.isFunction(e.noContentAvailable)&&e.noContentAvailable()}function m(e){var t={};if(e instanceof HTMLElement&&!(e instanceof HTMLIFrameElement)){var n=e.getBoundingClientRect();n.width>0&&(t.width=n.width),n.height>0&&(t.height=n.height)}var o=f();o&&a.Util.isFunction(o.renderStart)&&o.renderStart(t)}function v(e){return"string"==typeof e.vast_xml}function h(){a.Util.on("enter",function(e){e.rfpInViewTimerId&&(clearTimeout(e.rfpInViewTimerId),delete e.rfpInViewTimerId),e.rfpInViewTimerId=setTimeout(function(){e.rfpNotifyImpression(),delete e.rfpNotifyImpression,delete e.rfpInViewTimerId,r.InViewObserver.removeElement(e)},1e3)}),a.Util.on("exit",function(e){e.rfpInViewTimerId&&(clearTimeout(e.rfpInViewTimerId),delete e.rfpInViewTimerId)})}function _(e){var t=[];if(document.querySelectorAll)t=document.querySelectorAll('script[type="text/rfp-infeed-template"]');else for(var n=document.getElementsByTagName("script"),o=n.length,r=0;r<o;r++){var i=n[r].getAttribute("type")||"";"text/rfp-infeed-template"===i&&t.push(n[r])}for(var a=t.length,r=0;r<a;r++)if(t[r].getAttribute("data-adspot-id")===e)return t[r].innerHTML}function y(e){var t=O[e].controller,n=t.getRawRes();n&&d.Network.callSyncURLs(n)}function w(e){var t=O[e].controller,n=t.getRawRes();n&&d.Network.callSyncIFrameURLs(n)}function b(e,t){var n=O[t].rendered_index,o=O[t].controller,s=o.getLoadedAds(),d=s.slice(n),f=1===o.getRawRes().viewable_impression;if(d.length>0){var h={before_render:U._makeCallbackOfBeforeRender(),adspot_id:t};f&&(h.use_wrapper=!0);var y=o.getPlacementInfo().template||_(t);if((U.options.force||{}).template&&(y=_(t)),!y)return;for(var w=new u.Template(y),b=function(e,t){return function(){o.notifyImp(e,t)}},g=function(e){U.options.video_auto_play?e.rfpAdView.player.play():e.rfpAdView.player.resume()},R=function(e){e.rfpAdView.player.pause()},I=0;I<d.length&&I<e.length;I++)!function(t){var n=void 0,s=d[t].ad_id,l=e[t],u=v(d[t]);if(P&&u){var p=i.RFP.Video.VAST.parse(d[t].vast_xml);n=new i.RFP.InFeed.VideoAdView(l,p,w,h),i.RFP.InFeed.VideoAdView.loadStyles()}else n=new c.AdView(l,w,h);var _=o.showAd(n,s);if(P&&u){var y=_;a.Util.on("enter",g),a.Util.on("exit",R);var U=y.querySelector("video"),O=function e(){r.InViewObserver.removeElement(U),U.removeEventListener("ended",e)};U.addEventListener("ended",O),U.rfpAdView=n,r.InViewObserver.addElement(U)}if(n.showed){m(_);var I=_ instanceof HTMLElement?_:_[0].parentNode.querySelector('div[data-ad-id="'+s+'"]');f?(_.rfpNotifyImpression=b(s,I),_ instanceof HTMLElement?r.InViewObserver.addElement(_):_ instanceof HTMLCollection&&r.InViewObserver.addElement(_[0])):o.notifyImp(s,I)}}(I)}else{var A=o.getRawRes();if(!a.Util.isObject(A))return void p();var j=A.passback_tag;if(!j)return void p();a.Util.forEach(e,function(e){var t=new l.PassbackAdView(e,j);m(o.showAd(t))})}O[t].rendered_index=s.length}function g(e,t){return function(o){if(o)return void p();b(e,t),n(t),y(t),w(t)}}function R(){for(var t,n=e(),o=[],r={},i=n.length,c=0;c<i;c++){var d=n[c];t=d.getAttribute("data-rfp-adspot-id"),t&&(a.Util.isArray(r[t])||(r[t]=[],o.push(t)),r[t].push(d))}for(var l=o.length,c=0;c<l;c++){t=o[c];var u=r[t];O[t]={},O[t].rendered_index=0,O[t].controller=new s.AdController({adspot_id:t,device_id:U.options.device_id}),O[t].controller.loadAds(g(u,t))}}var U={},O={};U.options={video_auto_play:!0};var I=!0,P="function"==typeof i.RFP.InFeed.VideoAdView&&"object"===o(i.RFP.Video);return U._makeCallbackOfBeforeRender=function(){if(a.Util.isFunction(U.options.before_render))return U.options.before_render;var e={title_len:parseInt(""+U.options.title_length,10),desc_len:parseInt(""+U.options.description_length,10),advertiser_len:parseInt(""+U.options.displayed_advertiser_length,10),force:U.options.force||{}};return function(t,n){var o=n.title_length||e.title_len,r=n.description_length||e.desc_len,i=n.displayed_advertiser_length||e.advertiser_len;return e.force.title_length&&e.title_len&&(o=e.title_len),e.force.description_length&&e.desc_len&&(r=e.desc_len),e.force.displayed_advertiser_length&&e.advertiser_len&&(i=e.advertiser_len),(o||r||i)&&(i<11&&(i=11),o<t.title.length&&(t.title=t.title.substr(0,o-1)+"\u2026"),r<t.description.length&&(t.description=t.description.substr(0,r-1)+"\u2026"),i<t.displayed_advertiser.length&&(t.displayed_advertiser=t.displayed_advertiser.substr(0,i-1)+"\u2026")),t}},U.run=function(e){a.Util.isObject(e)&&(U.options=a.Util.extend(U.options,e)),I&&(h(),r.InViewObserver.observe(100,.5),I=!1),U.options.immediately?R():a.Util.waitDomReady(R)},U.reloadAds=function(){var e=0;for(var n in O)if(Object.prototype.hasOwnProperty.call(O,n)){var o=t(n);if(0===o.length)return;O[n].controller.loadAds(g(o,n)),e++}if(0===e)return void U.run()},U}()},{"../rfp-common/in_view_observer":6,"../rfp-common/rfp":9,"../rfp-common/util":10,"./ad_controller":11,"./ad_view":13,"./network":15,"./passback_ad_view":16,"./template":18}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Network=void 0;var o=e("../rfp-common/network_ad"),r=e("../rfp-common/rfp"),i=e("../rfp-common/util"),a=e("./ad_info_model"),s=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.fetchInFeedAds=function(e,t,n,o){var r=this.buildInFeedAdRequestUrl(e,t,o);this.fetchAds(r,e,a.AdInfoModel,n,o)},t.buildInFeedAdRequestUrl=function(e,t,n){var o,a=r.RFP.Common.Config;try{o=parent.document.URL}catch(e){o=document.referrer}var s=["adspot_id="+encodeURIComponent(e),"ad_type="+a.ad_type.infeed,"sequence="+t,"cachebuster="+this.makeCacheBuster(),"sdk_version="+a.version,"media_url="+encodeURIComponent(o)];if(i.Util.isObject(n)&&n.device_id){var c=btoa(unescape(encodeURIComponent(n.device_id)));s.push("audience_id="+encodeURIComponent(c)),s.push("audience_id_type=0")}return this.buildAdRequestUrl(s)},t}(o.NetworkAd);n.Network=c},{"../rfp-common/network_ad":7,"../rfp-common/rfp":9,"../rfp-common/util":10,"./ad_info_model":12}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.PassbackAdView=void 0;var o=function(){function e(e,t){this.showed=!1,this.el=e,this.tag=t,this.showed=!1}return e.prototype.show=function(){if(!this.el.parentNode)return void(window.console&&"function"==typeof console.info&&console.info("The ad place not found. Multiple loading tag may have been placed at same page."));var e=this.buildHtmlDomList(this.tag),t=this.swapTagToAd(e);return this.showed=!0,t},e.prototype.buildHtmlDomList=function(e){var t=document.createElement("div");return t.innerHTML=e,t.children},e.prototype.swapTagToAd=function(e){for(var t,n=e.length,o=!1,r=0;r<n;r++){var i=e[r];if("script"===i.tagName.toLowerCase()){o=!0;break}if(i.getElementsByTagName("script").length>0){o=!0;break}}if(o){var a=document.createElement("iframe");a.onload=function(){var e=a.contentWindow.document.documentElement.scrollHeight;e>0&&(a.height=""+e);var t=a.contentWindow.document.documentElement.scrollWidth;t>0&&(a.width=""+t),t>0&&e>0&&window.context&&window.context.requestResize&&window.context.requestResize(t,e)},a.width="100%",a.frameBorder="0",a.scrolling="no",a.marginWidth="0",a.marginHeight="0",a.src="javascript:false",this.el.parentNode.insertBefore(a,this.el);var s="<!DOCTYPE html>";s+="<html>",s+="<head>",s+='<meta charset="UTF-8" />',s+='<base target="_top" />',s+="</head>",s+="<body>",s+="<script>inDapIF = true;<\/script>";for(var r=0;r<n;r++){var c=e[r];s+=c.outerHTML}s+="</body>",s+="</html>";var d=a.contentWindow.document;d.open(),d.write(s),d.close(),t=a}else for(var r=0;r<n;r++){var c=e[r];this.el.parentNode.insertBefore(c.cloneNode(!0),this.el)}return this.el.parentNode.removeChild(this.el),t},e}();n.PassbackAdView=o},{}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.PlacementInfoModel=void 0;var o=e("../rfp-common/util"),r=function(){function e(e,t){this.info=this.store(e,t)}return e.prototype.toObject=function(){return this.info},e.prototype.store=function(t,n){var r={};return o.Util.forEach(e.keys,function(e){r[e]=t[e]}),r.adspot_id=n,r},e.keys=["adspot_id","template","title_length","description_length","displayed_advertiser_length"],e}();n.PlacementInfoModel=r},{"../rfp-common/util":10}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Template=void 0;var o=function(){function e(e){this.templateStr=e,this.tagOpen="{{",this.tagClose="}}"}return e.prototype.render=function(e){var t=this.templateStr;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t=t.replace(new RegExp(this.tagOpen+n+this.tagClose,"g"),e[n]));return t},e}();n.Template=o},{}]},{},[2,5,4,3,14]);
